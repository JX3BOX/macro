(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19885d38"],{"0481":function(t,e,n){"use strict";var a=n("23e7"),i=n("a2bf"),s=n("7b0b"),l=n("07fa"),r=n("5926"),c=n("65f0");a({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=s(this),n=l(e),a=c(e,0);return a.length=i(a,e,e,n,0,void 0===t?1:r(t)),a}})},"13d5":function(t,e,n){"use strict";var a=n("23e7"),i=n("d58f").left,s=n("a640"),l=n("2d00"),r=n("605d"),c=!r&&l>79&&l<83,o=c||!s("reduce");a({target:"Array",proto:!0,forced:o},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},3835:function(t,e,n){"use strict";function a(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("14d9");function i(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,i,s,l,r=[],c=!0,o=!1;try{if(s=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=s.call(n)).done)&&(r.push(a.value),r.length!==e);c=!0);}catch(u){o=!0,i=u}finally{try{if(!c&&null!=n["return"]&&(l=n["return"](),Object(l)!==l))return}finally{if(o)throw i}}return r}}var s=n("06c5");n("d9e2");function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){return a(t)||i(t,e)||Object(s["a"])(t,e)||l()}},4069:function(t,e,n){var a=n("44d2");a("flat")},a2bf:function(t,e,n){"use strict";var a=n("e8b5"),i=n("07fa"),s=n("3511"),l=n("0366"),r=function(t,e,n,c,o,u,d,m){var p,f,h=o,v=0,_=!!d&&l(d,m);while(v<c)v in n&&(p=_?_(n[v],v,e):n[v],u>0&&a(p)?(f=i(p),h=r(t,e,p,f,h,u-1)-1):(s(h+1),t[h]=p),h++),v++;return h};t.exports=r},b2a2:function(t){t.exports=JSON.parse('{"b":{"山川":[[{"name":"踏云","type":"talent","icon":22,"max":1,"desc":["踏云稻香溪涧。"]},{"name":"蹑云","type":"talent","icon":1490,"max":1,"desc":["蹑云逐月摘星。"]},{"name":"扶摇","type":"talent","icon":1485,"max":4,"desc":["扶摇直上九霄。"]},{"name":"萍踪","type":"talent","icon":622,"max":4,"desc":["萍踪林间侠影。"]}],[{"name":"花海","type":"talent","icon":13417,"max":1,"desc":["走过晴昼海的花海。"]},{"name":"望月","type":"talent","icon":3138,"max":1,"desc":["扶摇跳上摘星楼顶。"]},{"name":"雪松","type":"talent","icon":628,"max":1,"desc":["躺过论剑峰的石头。"]},{"name":"苍穹","type":"talent","icon":4173,"max":1,"desc":["站在光明顶的最高处。"]}],[{"name":"占卜","type":"talent","icon":2296,"max":1,"desc":["稻香村完成算卦。"]},{"name":"赶尸","type":"talent","icon":109,"max":1,"desc":["洛道的回忆。"]},{"name":"东瀛","type":"talent","icon":489,"max":2,"desc":["珍藏的真丝肚兜与春宫图册。"]},null],[{"name":"小女儿","type":"talent","icon":2789,"max":2,"desc":["不爱华服爱裙装。"]},{"name":"暮春寒","type":"talent","icon":3089,"max":2,"desc":["四月里，思念你。"]},{"name":"团绒戏","type":"talent","icon":14823,"max":2,"desc":["万家灯火，照亮你我。"]},{"name":"踏雪","type":"talent","icon":276,"max":2,"desc":["鹿震专座。"]}],[{"name":"师恩","type":"talent","icon":2181,"max":3,"desc":["拜一名师傅。"]},{"name":"桃李","type":"talent","icon":2182,"max":3,"desc":["收一名徒弟。"]},{"name":"江湖","type":"talent","icon":1241,"max":2,"desc":["加入一个帮会或团队。"]},null],[null,{"name":"采萝莉的小蘑菇","type":"skill","icon":2178,"max":1,"desc":["我的很大，你忍一下！"],"pretab":1},{"name":"情缘缘","type":"skill","icon":670,"max":1,"desc":["找到一名情缘。"]},{"name":"寡王","type":"skill","icon":433,"max":1,"desc":["正道的光，母胎solo！"]}]],"日月":[[{"name":"大战","type":"talent","icon":812,"max":5,"desc":["霸王弩，大战随便来四等一！"]},null,null,{"name":"南屏昆仑","type":"talent","icon":8313,"max":5,"desc":["完成威望日常。"]}],[{"name":"迦兰","type":"talent","icon":2103,"max":2,"desc":["腿毛的诱惑。"]},{"name":"莲华","type":"talent","icon":336,"max":2,"desc":["婉清……你听我说。"]},{"name":"云湖","type":"talent","icon":9,"max":2,"desc":["参与战场或插旗。"]},{"name":"烟影","type":"talent","icon":2375,"max":2,"desc":["参与一次千人攻防。"],"pretab":1}],[{"name":"屌丝","type":"talent","icon":8848,"max":1,"desc":["我是一只快乐的小屌丝。"]},{"name":"打工仔","type":"talent","icon":10452,"max":2,"desc":["我是一只快乐的打工仔。"]},{"name":"高级打工仔","type":"talent","icon":10451,"max":3,"desc":["我是一只高级的打工仔。"]},{"name":"壕","type":"talent","icon":2589,"max":4,"desc":["拥有一把橙武。"]}],[{"name":"打桩机","type":"talent","icon":5352,"max":5,"desc":["成为一名地痞艾斯。"]},{"name":"打地鼠","type":"talent","icon":1498,"max":2,"desc":["成为一名奶妈。"]},{"name":"我是MT","type":"talent","icon":646,"max":2,"desc":["成为一名坦克。"]},{"name":"全职高手","type":"talent","icon":415,"max":5,"desc":["精通全职业，成为骨灰玩家。"]}],[{"name":"墨艺","type":"talent","icon":243,"max":4,"desc":["在魔盒发表一篇作品。"],"pretab":1},{"name":"茶艺","type":"talent","icon":105,"max":9,"desc":["学习嘤嘤嘤的正确喊话方式。"],"pretab":1},{"name":"号令三军","type":"skill","icon":2588,"max":1,"desc":["成为一名团长或指挥。"],"pretab":1},{"name":"喷艺","type":"talent","icon":1488,"max":9,"desc":["在贴吧发表一篇818。"]}],[{"name":"宗师","type":"skill","icon":3120,"max":1,"desc":["精通墨艺，成为门派大师兄或门派大师姐。"],"pretab":1},{"name":"倾国倾城","type":"talent","icon":6738,"max":1,"desc":["成为一名团长夫人。"],"pretab":1},null,{"name":"谁与争锋","type":"skill","icon":272,"max":1,"desc":["成为一名优秀的键盘侠。"],"pretab":1}]]},"a":{"total":36,"series_open_need":29}}')},c7b2:function(t){t.exports=JSON.parse('{"a":{"冰心诀":{"begin":"left","content":[10081,10080],"talent":["拥雪","蝶舞"]},"云裳心经":{"begin":"right","content":[10081,10080],"talent":["拥雪","蝶舞"]},"傲血战意":{"begin":"left","content":[10026,10062],"talent":["斩绝","封魂"]},"铁牢律":{"begin":"right","content":[10026,10062],"talent":["斩绝","封魂"]},"花间游":{"begin":"left","content":[10021,10028],"talent":["墨艺","悬壶"]},"离经易道":{"begin":"right","content":[10021,10028],"talent":["墨艺","悬壶"]},"太虚剑意":{"begin":"left","content":[10015,10014],"talent":["剑宗","气宗"]},"紫霞功":{"begin":"right","content":[10015,10014],"talent":["剑宗","气宗"]},"易筋经":{"begin":"left","content":[10003,10002],"talent":["金刚","明王"]},"洗髓经":{"begin":"right","content":[10003,10002],"talent":["金刚","明王"]},"问水诀":{"begin":"left","content":[10144,10145],"talent":["行舟","枫晚"]},"山居剑意":{"begin":"right","content":[10144,10145],"talent":["行舟","枫晚"]},"毒经":{"begin":"left","content":[10175,10176],"talent":["百蛊","织天"]},"补天诀":{"begin":"right","content":[10175,10176],"talent":["百蛊","织天"]},"天罗诡道":{"begin":"right","content":[10224,10225],"talent":["落星","天机"]},"惊羽诀":{"begin":"left","content":[10224,10225],"talent":["落星","天机"]},"焚影圣诀":{"begin":"left","content":[10242,10243],"talent":["怒炎","明光"]},"明尊琉璃体":{"begin":"right","content":[10242,10243],"talent":["怒炎","明光"]},"通用":{"begin":"left","content":[0,0],"talent":["山川","日月"]}}}')},d58f:function(t,e,n){var a=n("59ed"),i=n("7b0b"),s=n("44ad"),l=n("07fa"),r=TypeError,c=function(t){return function(e,n,c,o){a(n);var u=i(e),d=s(u),m=l(u),p=t?m-1:0,f=t?-1:1;if(c<2)while(1){if(p in d){o=d[p],p+=f;break}if(p+=f,t?p<0:m<=p)throw r("Reduce of empty array with no initial value")}for(;t?p>=0:m>p;p+=f)p in d&&(o=n(o,d[p],p,u));return o}};t.exports={left:c(!1),right:c(!0)}},e030:function(t,e,n){"use strict";n.r(e);n("b0c0"),n("a9e3");var a=function(){var t=this,e=t._self._c;return e("app-layout",{attrs:{slug:"talent2"}},[e("div",{staticClass:"m-talent m-talent2"},[e("div",{staticClass:"m-talent-header"},[e("h1",{staticClass:"m-talent-title"},[t._v("镇派模拟器")]),e("div",{staticClass:"m-talent-panel"},[e("div",{staticClass:"m-talent-version"},[e("span",{staticClass:"u-label"},[t._v("选择版本")]),e("el-select",{attrs:{placeholder:"请选择游戏版本"},on:{change:t.reload},model:{value:t.version,callback:function(e){t.version=e},expression:"version"}},t._l(t.versions,(function(t){return e("el-option",{key:t.version,attrs:{label:t.name,value:t.version}})})),1)],1),t.isLogin?e("div",{staticClass:"u-toolbar"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-setting",size:"small"},on:{click:function(e){t.drawer=!0}}},[t._v("我的预设")])],1):t._e()])]),e("div",{staticClass:"m-talent-wrapper"},[e("h2",{staticClass:"m-talent-subtitle"},[t._v("选择心法")]),e("div",{staticClass:"m-talent-xf"},t._l(t.xfMaps,(function(n,a){return e("el-radio",{directives:[{name:"show",rawName:"v-show",value:t.isOrigin(n),expression:"isOrigin(item)"}],key:a,attrs:{label:n.name},on:{change:t.reload},model:{value:t.xf,callback:function(e){t.xf=e},expression:"xf"}},[e("img",{staticClass:"u-pic",attrs:{src:t.xficon(n.id),alt:n.name}}),e("span",{staticClass:"u-txt"},[t._v(t._s(n.name))])])})),1),e("h2",{staticClass:"m-talent-subtitle"},[t._v("配置镇派")]),e("div",{staticClass:"m-talent2-box"},[e("div",{staticClass:"m-talent2-main-title"},[t._v("镇派经脉模拟器")]),t.xf?[e("div",{staticClass:"m-talent2-surplus",class:[t.total-t.totalCount>0?"":"m-talent2-surplus-empty"]},[t._v(" 剩余点数 : "),e("span",[t._v(t._s(t.surplus))])]),e("div",{staticClass:"m-talent2-main"},[e("div",{staticClass:"m-talent2-left"},[e("div",{staticClass:"m-talent2-content",style:{"background-image":t.xf?"url(".concat(t.talentBg("left",1),")"):""}},[e("div",{staticClass:"m-talent2-title"},[e("img",{staticClass:"m-talent2-xf-icon",attrs:{src:t.xficon(t.xfContent[0])}}),e("span",{staticClass:"m-talent2-title-count"},[t._v(t._s(t.lCount))]),e("span",{staticClass:"m-talent2-title-name"},[t._v(t._s(t.l_name))])]),t._l(t.talentContent.left,(function(n,a){return e("div",{key:"l"+a,staticClass:"m-talent2-content-row"},[t._l(n,(function(n,i){return[n?e("div",{key:i,staticClass:"m-talent2-content-item",class:[{"m-talent2-content-item-skill":"skill"===n.type},t.canOperate(a,"left")?"":"m-talent2-content-item-disabled",n.pretab?"m-talent2-pretab":""],on:{mouseover:function(e){return t.$set(n,"on",!0)},mouseleave:function(e){return t.$set(n,"on",!1)}}},[e("div",{class:[t.canLeftItemOperate(a,i)?"m-talent2-selected":"skill"===n.type?"m-talent2-skill-unselected":"m-talent2-unselected","skill"===n.type?"":"m-talent2-talent",t.surplus||Number(t.l_data[a][i])?"":"skill"===n.type?"m-talent2-skill-unselected":"m-talent2-unselected"],on:{click:function(e){return t.leftTalentAdd(n,a,i)},contextmenu:function(e){return e.preventDefault(),t.leftTalentDecrease(a,i)}}},[n.pretab&&!t.isLeftParentAdd(a,i)&&t.canLeftItemOperate(a,i)?e("span",{class:"skill"===n.type?"is-add-skill":"is-add"}):t._e(),t.surplus||Number(t.l_data[a][i])?t._e():e("span",{class:"skill"===n.type?"is-add-skill":"is-add"}),e("img",{staticClass:"talent-img",class:{"skill-img":"skill"===n.type},attrs:{src:t.talentIcon(n.icon),alt:n.name}})]),Number(t.l_data[a][i])?e("span",{staticClass:"m-talent2-content-item-count",class:[Number(t.l_data[a][i])<n.max?"m-talent2-content-item-count-under":""]},[t._v(" "+t._s(t.l_data[a][i])+" ")]):t._e(),e("span",{staticClass:"m-talent2-pop",class:n.on?"on":""},[e("b",{staticClass:"m-talent2-name"},[e("span",[t._v(" "+t._s(n.name)+" "),n.id?e("small",{staticClass:"u-talent2-id"},[t._v("(ID: "+t._s(n.id)+")")]):t._e()]),e("span",{staticClass:"m-talent2-number"},[t._v(" 第"+t._s(Number(t.l_data[a][i])+"/"+n.max)+"重 ")])]),e("span",{staticClass:"m-talent2-desc",domProps:{innerHTML:t._s(Number(t.l_data[a][i])&&"通用"!==t.xf?n.desc[t.l_data[a][i]-1]:n.desc[0])}}),Number(t.l_data[a][i])&&Number(t.l_data[a][i])<n.max?e("span",{staticClass:"m-talent2-desc-next"},["通用"!==t.xf?e("span",{staticClass:"m-next-text"},[t._v("下一重：")]):t._e(),e("span",[t._v(" "+t._s(n.desc[t.l_data[a][i]])+" ")])]):t._e(),Number(t.l_data[a][i])===n.max?e("span",{staticClass:"m-max"},[t._v("该招式已练至最高境界")]):t._e(),Number(t.l_data[a][i])?e("span",{staticClass:"m-talent-retrogress"},[t._v("右键点击遗忘")]):t._e()])]):e("div",{key:i,staticClass:"m-talent2-content-item-empty"})]}))],2)}))],2)]),e("div",{staticClass:"m-talent2-right"},[e("div",{staticClass:"m-talent2-content",style:{"background-image":t.xf?"url(".concat(t.talentBg("right",1),")"):""}},[e("div",{staticClass:"m-talent2-title"},[e("img",{staticClass:"m-talent2-xf-icon",attrs:{src:t.xficon(t.xfContent[1])}}),e("span",{staticClass:"m-talent2-title-count"},[t._v(t._s(t.rCount))]),e("span",{staticClass:"m-talent2-title-name"},[t._v(t._s(t.r_name))])]),t._l(t.talentContent.right,(function(n,a){return e("div",{key:"r"+a,staticClass:"m-talent2-content-row"},[t._l(n,(function(n,i){return[n?e("div",{key:i,staticClass:"m-talent2-content-item",class:[{"m-talent2-content-item-skill":"skill"===n.type},t.canOperate(a,"right")?"":"m-talent2-content-item-disabled",n.pretab?"m-talent2-pretab":""],on:{mouseover:function(e){return t.$set(n,"on",!0)},mouseleave:function(e){return t.$set(n,"on",!1)}}},[e("div",{class:[t.canRightItemOperate(a,i)?"m-talent2-selected":"skill"===n.type?"m-talent2-skill-unselected":"m-talent2-unselected","skill"===n.type?"":"m-talent2-talent",t.surplus||Number(t.r_data[a][i])?"":"skill"===n.type?"m-talent2-skill-unselected":"m-talent2-unselected"],on:{click:function(e){return t.rightTalentAdd(n,a,i)},contextmenu:function(e){return e.preventDefault(),t.rightTalentDecrease(a,i)}}},[n.pretab&&!t.isRightParentAdd(a,i)&&t.canRightItemOperate(a,i)?e("span",{class:"skill"===n.type?"is-add-skill":"is-add"}):t._e(),t.surplus||Number(t.r_data[a][i])?t._e():e("span",{class:"skill"===n.type?"is-add-skill":"is-add"}),e("img",{staticClass:"talent-img",class:{"skill-img":"skill"===n.type},attrs:{src:t.talentIcon(n.icon),alt:n.name}})]),Number(t.r_data[a][i])?e("span",{staticClass:"m-talent2-content-item-count",class:[Number(t.r_data[a][i])<n.max?"m-talent2-content-item-count-under":""]},[t._v(" "+t._s(t.r_data[a][i])+" ")]):t._e(),e("span",{staticClass:"m-talent2-pop",class:n.on?"on":""},[e("b",{staticClass:"m-talent2-name"},[e("span",[t._v(" "+t._s(n.name)+" "),n.id?e("small",{staticClass:"u-talent2-id"},[t._v("(ID: "+t._s(n.id)+")")]):t._e()]),e("span",{staticClass:"m-talent2-number"},[t._v(" 第"+t._s(Number(t.r_data[a][i])+"/"+n.max)+"重 ")])]),e("span",{staticClass:"m-talent2-desc",domProps:{innerHTML:t._s(Number(t.r_data[a][i])&&"通用"!==t.xf?n.desc[t.r_data[a][i]-1]:n.desc[0])}}),Number(t.r_data[a][i])&&Number(t.r_data[a][i])<n.max?e("span",{staticClass:"m-talent2-desc-next"},["通用"!==t.xf?e("span",{staticClass:"m-next-text"},[t._v("下一重：")]):t._e(),e("span",[t._v(" "+t._s(n.desc[t.r_data[a][i]])+" ")])]):t._e(),Number(t.r_data[a][i])===n.max?e("span",{staticClass:"m-max"},[t._v("该招式已练至最高境界")]):t._e(),Number(t.r_data[a][i])?e("span",{staticClass:"m-talent-retrogress"},[t._v("右键点击遗忘")]):t._e()])]):e("div",{key:i,staticClass:"m-talent2-content-item-empty"})]}))],2)}))],2)])]),e("div",{staticClass:"m-talent2-actions"},[e("div",{staticClass:"rest-btn",class:t.totalCount?"m-talent2-actions-btn":"m-talent2-actions-btn-disabled",on:{click:t.reload}},[t._v(" 重置 ")])])]:t._e()],2),e("h2",{staticClass:"m-talent-subtitle"},[t._v("镇派编码")]),e("div",{staticClass:"m-talent-code"},[e("el-input",{attrs:{placeholder:"粘贴编码亦可自动解析奇穴"},on:{change:t.parseSchema},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}},[e("span",{staticClass:"u-copy",attrs:{slot:"prepend"},on:{click:function(e){return t.copy(t.code)}},slot:"prepend"},[e("i",{staticClass:"el-icon-document-copy"}),t._v(" 点击复制 ")])])],1),t.isAdmin?[e("h2",{staticClass:"m-talent-subtitle"},[t._v("配装编码")]),e("el-input",{attrs:{placeholder:"配装器编码"},model:{value:t.pzcode,callback:function(e){t.pzcode=e},expression:"pzcode"}},[e("span",{staticClass:"u-copy",attrs:{slot:"prepend"},on:{click:function(e){return t.copy(t.pzcode)}},slot:"prepend"},[e("i",{staticClass:"el-icon-document-copy"}),t._v(" 点击复制 ")])])]:t._e(),t.isLogin?e("div",{staticClass:"m-talent-op"},[e("el-button",{attrs:{type:"primary",icon:t.currentSchema?"el-icon-check":"el-icon-document-add"},on:{click:t.save}},[t._v(t._s(t.currentSchema?"保存":"保存为预设"))]),t.isEditing?e("el-button",{staticClass:"u-btn",attrs:{type:"success",icon:"el-icon-document-add",plain:""},on:{click:t.saveAs}},[t._v("另存为")]):t._e()],1):t._e()],2),t.isLogin?e("talent-drawer",{attrs:{drawer:t.drawer,type:"talent2",client:t.client},on:{"update-drawer":t.updateDrawer,use:t.use}}):t._e()],1)])},i=[],s=n("5530"),l=n("3835"),r=(n("13d5"),n("d3b7"),n("0481"),n("4069"),n("d81d"),n("a15b"),n("99af"),n("caad"),n("2532"),n("e9c4"),n("159b"),n("14d9"),n("fb6a"),n("a434"),n("46d4")),c=n("65c2"),o=n("c7b2"),u=n("b2a2"),d=n("c9d2"),m=n("0644"),p=n.n(m),f=n("83e1"),h=n("85e4"),v=n("f71e"),_=n("18c0"),g=n("793d"),b={name:"Talent2",data:function(){return{activeName:"common",xf:"",code:"0",pzcode:"",begin:"left",l_name:"山川",r_name:"日月",version:"",versions:[],talents:{},total:0,l_data:["0000","0000","0000","0000","0000","0000"],r_data:["0000","0000","0000","0000","0000","0000"],series_open_need:0,xfContent:[],talentContent:{left:[],right:[]},isLogin:d["a"].isLogin(),isAdmin:!1,showList:!1,drawer:!1,currentShemaName:"",currentSchema:"",isInit:!0}},computed:{lCount:function(){return this.l_data.length?this.l_data.map((function(t){return t.split("")})).flat().reduce((function(t,e){return Number(t)+Number(e)})):0},rCount:function(){return this.r_data.length?this.r_data.map((function(t){return t.split("")})).flat().reduce((function(t,e){return Number(t)+Number(e)})):0},leftLastIndex:function(){for(var t=0,e=this.l_data.length-1;e>0;e--)if(Number(this.l_data[e])){t=e;break}return t},rightLastIndex:function(){for(var t=0,e=this.r_data.length-1;e>0;e--)if(Number(this.r_data[e])){t=e;break}return t},totalCount:function(){return this.lCount+this.rCount},talent2Data:function(){return"left"===this.begin?this.l_data.concat(this.r_data).join(","):this.r_data.concat(this.l_data).join(",")},surplus:function(){return this.total-this.totalCount},client:function(){return location.href.includes("origin")?"origin":"std"},mount:function(){var t;return null===(t=r[this.xf])||void 0===t?void 0:t.id},params:function(){var t=this.mount,e=this.version,n=this.code,a=this.pzcode,i=this.xf;return{client:"origin",type:"talent2",mount:t,version:e,code:JSON.parse(n),pzcode:JSON.parse(a),xf:i}},xfMaps:function(){var t=p()(r);return t},isEditing:function(){return!!this.currentSchema}},methods:{updateDrawer:function(t){this.drawer=t},getIcon:function(t){return c["__imgPath"]+"image/box/"+t+".svg"},reload:function(t){this.currentSchema="",this.l_data=["0000","0000","0000","0000","0000","0000"],this.r_data=["0000","0000","0000","0000","0000","0000"]},reset:function(){},renderCode:function(){var t=this.version,e=this.xf,n=this.talent2Data,a=this.l_data,i=this.r_data,s=this.talentContent,l={version:t,xf:e,sq:n};this.code=JSON.stringify(l);var r=[];a.forEach((function(t,e){var n=t.split("").map((function(t){return parseInt(t)}));n.forEach((function(t,n){if(t){var a=s.left[e][n],i={id:a.id,icon:a.icon,level:t,name:a.name};r.push(i)}}))})),i.forEach((function(t,e){var n=t.split("").map((function(t){return parseInt(t)}));n.forEach((function(t,n){if(t){var a=s.right[e][n],i={id:a.id,icon:a.icon,level:t,name:a.name};r.push(i)}}))})),this.pzcode=JSON.stringify(r)},copy:function(t){Object(v["a"])(t,{success_message:"编码复制成功"})},isOrigin:function(t){return t["client"].includes("origin")},parseSchema:function(){try{var t,e,n,a,i=JSON.parse(this.code);this.version=i.version,this.xf=i.xf;var s=this.xf;this.xfContent=null===(t=o["a"][s])||void 0===t?void 0:t.content,this.begin=null===(e=o["a"][s])||void 0===e?void 0:e.begin,this.talentContent.left=this.talents[o["a"][s].talent[0]],this.l_name=null===(n=o["a"][s])||void 0===n?void 0:n.talent[0],this.talentContent.right=this.talents[o["a"][s].talent[1]],this.r_name=null===(a=o["a"][s])||void 0===a?void 0:a.talent[1];var l=i.sq.split(",");"left"===this.begin?(this.l_data=[].concat(l.slice(0,6)),this.r_data=l.slice(6,l.length)):(this.r_data=l.slice(0,6),this.l_data=l.slice(6,l.length))}catch(r){this.$message.error("编码格式错误")}},canOperate:function(t,e){return"left"===e?this.lCount>=5*t:this.rCount>=5*t},canLeftItemOperate:function(t,e){var n=!1;return"left"===this.begin?t?this.lCount>0&&this.lCount>=5*t&&(n=!0):n=!0:"right"===this.begin&&this.rCount>=this.series_open_need&&this.lCount>=0&&this.lCount>=5*t&&(n=!0),n},isLeftParentAdd:function(t,e){return Number(this.l_data[t-1][e])},leftTalentAdd:function(t,e,n){if(this.canOperate(e,"left"))if(null===t||void 0===t||!t.pretab||this.isLeftParentAdd(e,n)){var a=t.max,i=t.parent;if("right"===this.begin&&this.rCount<this.series_open_need)this.$message.warning({message:"主天赋需要先激活".concat(this.series_open_need,"点，才能激活本区域的天赋")});else{if(null!==i&&void 0!==i&&i.length){var s=Object(l["a"])(i,1),r=s[0],c=Number(this.l_data[r.row][r.index]);if(!c)return void this.$message({type:"warning",message:"该天赋存在前置天赋，需先激活前置天赋"})}if(this.totalCount>=this.total)this.$message({type:"warning",message:"最大加点数为"+this.total});else{var o=Number(this.l_data[e][n]);if(o<a){o++;var u=this.l_data[e].split("");u[n]=String(o),this.l_data.splice(e,1,u.join(""))}else this.$message({type:"warning",message:"该天赋已达最高层数"})}}}else this.$message.warning({message:"要激活该天赋需要先激活对应的上层天赋"})},leftTalentDecrease:function(t,e){var n=Number(this.l_data[t][e]);if(n>0){if(t<this.l_data.length-1){var a=0,i=this.l_data.slice(0,t+1),s=this.l_data.map((function(t){return t.split("")})).flat().reduce((function(t,e){return Number(t)+Number(e)}));if(a=i.map((function(t){return t.split("")})).flat().reduce((function(t,e){return Number(t)+Number(e)})),a<=5*this.leftLastIndex&&s>a)return void this.$message.warning({title:"提醒",message:"不能再减啦"})}n--;var l=this.l_data[t].split("");l[e]=String(n),this.l_data.splice(t,1,l.join(""))}},canRightItemOperate:function(t,e){var n=!1;return"right"===this.begin?t?this.rCount>0&&this.rCount>=5*t&&(n=!0):n=!0:"left"===this.begin&&this.lCount>=this.series_open_need&&this.rCount>=0&&this.rCount>=5*t&&(n=!0),n},isRightParentAdd:function(t,e){return Number(this.r_data[t-1][e])},rightTalentAdd:function(t,e,n){if(this.canOperate(e,"right"))if(null===t||void 0===t||!t.pretab||this.isRightParentAdd(e,n)){var a=t.max,i=t.parent;if("left"===this.begin&&this.lCount<this.series_open_need)this.$message.warning({title:"提醒",message:"主天赋需要先激活".concat(this.series_open_need,"点，才能激活本区域的天赋")});else{if(null!==i&&void 0!==i&&i.length){var s=Object(l["a"])(i,1),r=s[0],c=Number(this.r_data[r.row][r.index]);if(!c)return void this.$message({type:"warning",message:"该天赋存在前置天赋，需先激活前置天赋"})}if(this.totalCount>=this.total)this.$message({type:"warning",message:"最大加点数为"+this.total});else{var o=Number(this.r_data[e][n]);if(o<a){o++;var u=this.r_data[e].split("");u[n]=String(o),this.r_data.splice(e,1,u.join(""))}else this.$message({type:"warning",message:"该天赋已达最高层数"})}}}else this.$message.warning({message:"要激活该天赋需要先激活对应的上层天赋"})},rightTalentDecrease:function(t,e){var n=Number(this.r_data[t][e]);if(n>0){if(t<this.r_data.length-1){var a=0,i=this.r_data.slice(0,t+1),s=this.r_data.map((function(t){return t.split("")})).flat().reduce((function(t,e){return Number(t)+Number(e)}));if(a=i.map((function(t){return t.split("")})).flat().reduce((function(t,e){return Number(t)+Number(e)})),a<=5*this.rightLastIndex&&s>a)return void this.$message.warning({title:"提醒",message:"不能再减啦"})}n--;var l=this.r_data[t].split("");l[e]=String(n),this.r_data.splice(t,1,l.join(""))}},talentBg:function(t,e){if(t)return"left"===t?c["__imgPath"]+"image/talent/".concat(this.xfContent[0],"_").concat(e,".png"):c["__imgPath"]+"image/talent/".concat(this.xfContent[1],"_").concat(e,".png")},getVersions:function(){var t=this;fetch(c["__ossRoot"]+"data/talent2/index.json").then((function(t){return t.json()})).then((function(e){var n;t.versions=e,t.version=null===(n=t.versions[0])||void 0===n?void 0:n.version}))},getTalents:function(){var t=this;fetch(c["__ossRoot"]+"data/talent2/"+this.version+".json").then((function(t){return t.json()})).then((function(e){t.talents=Object(s["a"])(Object(s["a"])({},e),u["b"]),t.isInit&&(t.xf="通用",t.isInit=!1),t.total=66}))},save:function(){var t=this;this.mount?this.isEditing?Object(f["d"])(this.currentSchema.id,Object(s["a"])({},this.params)).then((function(){t.$notify({type:"success",title:"成功",message:"修改成功"})})):this.$prompt("请输入方案名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"输入不能为空",inputValidator:function(t){if(!t)return"输入不能为空"}}).then((function(e){var n=e.value;Object(f["a"])(Object(s["a"])(Object(s["a"])({},t.params),{},{name:n})).then((function(){t.$notify({type:"success",title:"成功",message:"预设方案保存成功"})}))})):this.$notify({type:"warning",title:"提醒",message:"暂未选择心法，请先选择心法"})},saveAs:function(){var t,e=this;this.$prompt("方案另存为","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"输入不能为空",inputValue:null===(t=this.currentSchema)||void 0===t?void 0:t.name,inputValidator:function(t){if(!t)return"输入不能为空"}}).then((function(t){var n=t.value;Object(f["a"])(Object(s["a"])(Object(s["a"])({},e.params),{},{name:n})).then((function(){e.$message({type:"success",message:"方案保存成功"})}))}))},use:function(t){var e=this,n=t.code;this.currentSchema=t,this.xf=n.xf,setTimeout((function(){e.code=JSON.stringify(t.code),e.pzcode=JSON.stringify(t.pzcode),e.parseSchema()}))},talentIcon:function(t){return"通用"==this.xf?Object(h["iconLink"])(t):Object(h["iconLink"])(t,"origin")},xficon:function(t){return c["__imgPath"]+"image/xf/"+t+".png"}},watch:{version:function(t){t&&this.getTalents()},xf:{immediate:!0,handler:function(t,e){var n,a,i,s,l,r,c,d,m=this;t&&(this.xfContent=null===(n=o["a"][t])||void 0===n?void 0:n.content,this.begin=null===(a=o["a"][t])||void 0===a?void 0:a.begin,this.talentContent.left=null===(i=this.talents[null===(s=o["a"][t].talent)||void 0===s?void 0:s[0]])||void 0===i?void 0:i.map((function(t){var e=t.map((function(t){return t&&m.$set(t,"on",!1),t}));return e})),this.l_name=null===(l=o["a"][t])||void 0===l?void 0:l.talent[0],this.talentContent.right=null===(r=this.talents[null===(c=o["a"][t].talent)||void 0===c?void 0:c[1]])||void 0===r?void 0:r.map((function(t){var e=t.map((function(t){return t&&m.$set(t,"on",!1),t}));return e})),this.r_name=null===(d=o["a"][t])||void 0===d?void 0:d.talent[1],this.total="通用"===t?66:u["a"].total,this.renderCode())}},talent2Data:function(){this.renderCode()}},mounted:function(){this.getVersions(),this.series_open_need=u["a"].series_open_need,this.isAdmin=d["a"].isAdmin()},components:{talentDrawer:_["a"],AppLayout:g["a"]}},x=b,y=(n("f1e4"),n("2877")),C=Object(y["a"])(x,a,i,!1,null,null,null);e["default"]=C.exports},ef63:function(t,e,n){},f1e4:function(t,e,n){"use strict";n("ef63")}}]);
//# sourceMappingURL=chunk-19885d38.d2fe19d3.js.map