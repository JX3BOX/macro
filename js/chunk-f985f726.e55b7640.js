(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f985f726"],{3297:function(t,e,a){},9707:function(t,e,a){},a1af:function(t,e,a){"use strict";a("9707")},d504:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-archive-box"},[a("div",{staticClass:"m-archive-search",attrs:{slot:"search-before"},slot:"search-before"},[a("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:t.publish_link}},[t._v("+ 发布作品")]),a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(e){t.search="string"===typeof e?e.trim():e},expression:"search"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("关键词")]),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("div",{staticClass:"m-archive-filter"},[a("clientBy",{attrs:{type:t.client},on:{filter:t.filterImperceptibly}}),a("markBy",{on:{filter:t.filterMeta}}),a("menuBy",{attrs:{data:t.langs,type:"lang",placeholder:"语言"},on:{filter:t.filterMeta}}),a("orderBy",{on:{filter:t.filterMeta}})],1),t.search||t.subtype?t._e():a("rec-table"),t.data&&t.data.length?a("div",{staticClass:"m-archive-list"},[a("ul",{staticClass:"u-list"},t._l(t.data,(function(e,i){return a("list-item",{key:i+e,attrs:{item:e,order:t.order},on:{loadMacro:t.loadMacro}})})),1)]):a("el-alert",{staticClass:"m-archive-null",attrs:{title:"没有找到相关条目",type:"info",center:"","show-icon":""}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),a("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}}),a("el-drawer",{staticClass:"m-macro-drawer",attrs:{title:"云端宏",visible:t.drawer,"append-to-body":!0},on:{"update:visible":function(e){t.drawer=e}}},[a("div",{staticClass:"u-box"},[a("h2",{staticClass:"u-title"},[t._v(t._s(t.drawer_title))]),a("macro",{attrs:{ctx:t.drawer_content,name:t.drawer_title}}),a("a",{staticClass:"u-skip el-button el-button--primary",attrs:{href:t.drawer_link}},[a("i",{staticClass:"el-icon-copy-document"}),t._v(" 查看详情 ")])],1)])],1)},n=[],r=a("3835"),s=a("ade3"),l=(a("ac1f"),a("841c"),a("498a"),a("2c3e"),a("d3b7"),a("99af"),a("b0c0"),a("b64b"),a("caad"),a("2532"),a("1fb9")),o=a("44fd"),c=a("85e4"),u=a("29c2"),d=(a("46d4"),a("a25b")),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-index-rec"},[t._m(0),a("div",{staticClass:"u-ac",domProps:{innerHTML:t._s(t.ac)}}),a("el-row",t._l(t.data,(function(e,i){return a("el-col",{key:i,attrs:{span:6}},[a("div",{staticClass:"u-rec"},[a("a",{style:t._f("highLight")(e.color),attrs:{href:e.link,target:"_blank"}},[e.icon?a("img",{attrs:{src:t._f("iconLink")(e.icon)}}):t._e(),t._v(" "+t._s(e.label)+" ")])])])})),1)],1)},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h5",{staticClass:"u-title"},[a("span",[t._v("当前版本编辑推荐")])])}],f=a("73cd"),g=a("65c2"),m={color:"",label:"",link:"",icon:""},v={name:"rec_table",props:[],components:{},data:function(){return{data:[],ac:""}},computed:{client:function(){return this.$store.state.client}},methods:{init:function(){var t=this,e="origin"==this.client?"-origin":"";Object(f["b"])("macro-rec"+e).then((function(e){t.data=e.data.data.menu_group.menus||[];var a=t.data.length%4;if(a)for(var i=0;i<4-a;i++)t.data.push(m)})),Object(f["a"])("macro-ac"+e).then((function(e){t.ac=e.data.data.breadcrumb.html}))}},filters:{highLight:function(t){return t?"color:"+t+";font-weight:bold;":""},iconLink:function(t){return g["__imgPath"]+"image/xf/"+t+".png"}},watch:{client:{immediate:!0,handler:function(){this.init()}}}},b=v,y=(a("a1af"),a("2877")),_=Object(y["a"])(b,h,p,!1,null,null,null),w=_.exports,k={name:"Index",props:[],data:function(){return{loading:!1,data:[],page:1,per:10,total:1,pages:1,number_queries:["per","page"],subtype:"",order:"update",mark:"",client:this.$store.state.client,search:"",lang:"",drawer:!1,drawer_title:"",drawer_content:"",drawer_link:"",langs:{cn:"简体中文",tr:"繁體中文"}}},computed:{publish_link:function(){return Object(c["publishLink"])(l["a"])},hasNextPage:function(){return this.pages>1&&this.page<this.total},query:function(){return{subtype:this.subtype,order:this.order,mark:this.mark,client:this.client,search:this.search,lang:this.lang}},pg_queries:function(){return{page:this.page,per:this.per}},reset_queries:function(){return[this.subtype,this.search]}},methods:{buildQuery:function(t){t&&(this.page+=1);var e={per:this.per,page:this.page};for(var a in this.query)void 0!==this.query[a]&&""!==this.query[a]&&null!==this.query[a]&&("search"==a?e.search=this.query.search.trim():e[a]=this.query[a]);return e.subtype&&(e.sticky=1),e},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=this.buildQuery(e);return console.log("[cms-list]","<loading data>",a),this.loading=!0,Object(u["e"])(a).then((function(a){var i,n,r,s,l,o,c,u;e?t.data=t.data.concat(null===(l=a.data)||void 0===l||null===(o=l.data)||void 0===o?void 0:o.list):t.data=null===(c=a.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.list;t.total=null===(i=a.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.total,t.pages=null===(r=a.data)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.pages})).finally((function(){t.loading=!1}))},replaceRoute:function(t){return this.$router.push({name:this.$route.name,query:Object.assign({},this.$route.query,t)}).then((function(){window.scrollTo(0,0)})).catch((function(t){}))},filterMeta:function(t){var e;this.replaceRoute((e={},Object(s["a"])(e,t["type"],t["val"]),Object(s["a"])(e,"page",1),e))},filterImperceptibly:function(t){this[t["type"]]=t["val"]},changePage:function(t){this.loadData(),this.replaceRoute({page:t})},appendPage:function(){this.loadData(!0)},loadMacro:function(t){var e=Object(r["a"])(t,3),a=e[0],i=e[1],n=e[2];this.drawer=!0,this.drawer_title=a+"#"+i.name,this.drawer_content=i.macro,this.drawer_link="./"+n+"?tab="+i.name}},watch:{"$route.query":{deep:!0,immediate:!0,handler:function(t){if(Object.keys(t).length)for(var e in console.log("[cms-list]","<route query change>",t),t)this.number_queries.includes(e)?this[e]=~~t[e]:this[e]=t[e]}},reset_queries:{deep:!0,handler:function(){console.log("[cms-list]","<reset page>"),this.page=1}},query:{deep:!0,immediate:!0,handler:function(t){console.log("[cms-list]","<request query change>",t),this.loadData()}}},mounted:function(){},components:{listItem:o["a"],recTable:w,macro:d["a"]}},q=k,C=(a("ec12"),Object(y["a"])(q,i,n,!1,null,null,null));e["default"]=C.exports},ec12:function(t,e,a){"use strict";a("3297")}}]);
//# sourceMappingURL=chunk-f985f726.e55b7640.js.map